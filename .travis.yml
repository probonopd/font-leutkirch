language: minimal
dist: bionic

script:
  - sudo apt-get -y install fontforge
  - |2
    FILENAMES=$(find source/ -type f -name 'fontinfo.plist' | cut -d "/" -f 2 | cut -d "." -f 1)
    for FILENAME in $FILENAMES; do
      fontforge -c "f=fontforge.open(\"source/${FILENAME}.ufo\"); f.generate(\"${FILENAME}.otf\")"
      fontforge -c "f=fontforge.open(\"source/${FILENAME}.ufo\"); f.generate(\"${FILENAME}.ttf\")"
    done

after_success:
  - wget -c https://github.com/probonopd/uploadtool/raw/master/upload.sh
  - bash upload.sh *.otf *.ttf
  
branches:
  except:
    - # Do not build tags that we create when we upload to GitHub Releases
    - /^(?i:continuous)/
